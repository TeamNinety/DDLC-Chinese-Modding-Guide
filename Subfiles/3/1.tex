\documentclass[../../Main.tex]{subfiles}
\begin{document}
\section{Python中的几种数据类型}
\subsection{数字}
在大多数编程语言中，数字可以分为两类——整型（int）与浮点类（float）型。整型顾名思义，就是指3、2、6、-2等不包含小数的数字，浮点型则与之相反，即包含小数的数字，如-2.9、7.1、3.213等。

数字可以进行运算，如加减乘除。在Python中，加法运算使用+号，减法运算使用--号，乘法运算使用*号，除法运算使用/号。对于其他的运算符，详细请见表\ref{table:3.1.2}。如下例：
\begin{lstlisting}
>>> 1 + 2
%\Output{3}%

>>> 2 / 2
%\Output{1.0}%

>>> 10 - 8
%\Output{2}%

>>> 2 * 7
%\Output{14}%
\end{lstlisting}

\begin{ExtraKnowledge}
    我们可以使用变量将想要将数据保存。使用=操作符对变量进行赋值，如：
    \begin{lstlisting}[numbers=none]
>>> a = 1
>>> a
%\Output{1}%

>>> a = a * 2
>>> a
%\Output{2}%
    \end{lstlisting}
\end{ExtraKnowledge}

对于乘方、整除、取模（余数）计算，则分别使用**运算符、//运算符与\%运算符。如下例：
\begin{lstlisting}
>>> 1 ** 2
%\Output{2}%

>>> 2 ** 3
%\Output{8}%

>>> 10 // 8
%\Output{1}%

>>> 14 // 7
%\Output{2}%

>>> 14 %\%% 7
%\Output{0}%

>>> 25 %\%% 4
%\Output{1}%
\end{lstlisting}

\subsection{字符串}
除了数字，Python还可以处理字符串（str）。在Python中可以使用双引号会单引号括起来表示字符串，也可以使用反斜线操作符对特殊字符转义。

\begin{lstlisting}
>>> 'Hello'
%\Output{'Hello'}%

>>> "Hi!"
%\Output{"Hi!"}%

>>> 'I\'m fine.'
%\Output{"I'm fine."}%

>>> "I'm fine."
%\Output{"I'm fine."}%

>>> print("This is a backslash: \\")
%\Output{This is a backslash: \textbackslash}%

\end{lstlisting}

在Python中，字符串同样支持一些运算功能。+号能将两个字符串连接起来。*则用来重复字符串。如：

\begin{lstlisting}
>>> 'Hello! ' * 3
%\Output{'Hello! Hello! Hello!'}%

>>> "Hi! " + "How are you?"
%\Output{"Hi! How are you?"}%

\end{lstlisting}

\begin{center}
    \tablehead{
    \hline
    操作符 & 描述 & 示例 \\
    \hline
    }
    \tabletail{\hline}
    \tablelasttail{\hline}
    \captionof{table}{常用逻辑运算符号与含义}\label{table:3.1.2}
    \begin{supertabular}{|c|c|c|}
        \hline
        + & 加法运算，将运算符两侧值相加 & 1 + 2; "str" + "string" \\
        \hline
        - & 减法运算，将运算符两侧值相减 & 1 - 2\\
        \hline
        * & 乘法运算，将操作符两侧值相称 & 4 * 2；"str" * 3\\
        \hline
        / & 除法运算，左操作数除以右操作数 & 3 / 1\\
        \hline
        \% & 取模运算，左操作数除以右操作数的余数部分 & 7 \% 2\\
        \hline
        ** & 幂运算，左操作数的右操作数次幂 & 2 ** 3\\
        \hline
        // & 整除运算，左操作数整除以右操作数& 3 // 2\\
        \hline
        += & 将左侧值加上右侧值并将结果保存给左侧对象 & a += 100\\
        \hline
        -= & 将左侧值减去右侧值并将结果保存给左侧对象 & a -= 100\\
        \hline
        *= & 将左侧值乘上右侧值并将结果保存给左侧对象 & a *= 100\\
        \hline
        /= & 将左侧值除以右侧值并将结果保存给左侧对象 & a /= 100\\
        \hline
        \%= & 将左侧值取模右侧值并将结果保存给左侧对象 & c \%= a 等效于 c = c \% a\\
        \hline
        **=	& 幂赋值运算符 & c **= a 等效于 c = c ** a\\
        \hline
        //=	& 取整除赋值运算符 & c //= a 等效于 c = c // a\\
        \hline
    \end{supertabular}
\end{center}

\subsection{列表与元组}

\subsubsection{列表}

在Python中，列表（list）是一种常见的数据类型。在列表可以将多种数据组合在一起。如：
\begin{lstlisting}
>>> ['1', '2', '3']
%\Output{['1', '2', '3']}%

>>> ['This', 'is', 'a', 'list']
%\Output{['This', 'is', 'a', 'list']}%

\end{lstlisting}


在列表中，我们可以使用索引（index）来访问指定数据。如:
\begin{lstlisting}
>>> name_list = ['Sayori', '莫妮卡', 'Yuri', 'Natsuki']
>>> name_list[0]
%\Output{'Sayori'}%

>>> name_list[3]
%\Output{'Natsuki'}%
\end{lstlisting}

\begin{Warning}
    从上例中，我们可以知道索引从0开始。但请注意：索引最大值不可以超出列表的长度。即在name\_list这个列表中，索引最大只能为3，因为此时从0往后数4个数为3。如果索引最大值超出了列表长度，Python就会抛出IndexError错误。如：
    \begin{lstlisting}[numbers=none]
>>> name_list = ['Sayori', 'Monika']
>>> name_list[2]

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
    \end{lstlisting}
\end{Warning}

\begin{ExtraKnowledge}
    索引的值也可以为负数，此时Python会从列表尾部向前寻找索引。但请注意，若要使Python从尾部开始寻找，则索引从-1开始，且同样不可超出列表最大长度。如下例：
    \begin{lstlisting}[numbers=none]
>>> name_list = ['Sayori', 'Monika', 'Natsuki', 'Yuri']
>>> name_list[-1]
%\Output{'Yuri'}%

>>> name_list[-4]
%\Output{'Sayori'}%

>>> name_list[-10]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
    \end{lstlisting}
\end{ExtraKnowledge}

\begin{ExtraKnowledge}
    索引也可用于字符串，但无法修改字符串的数据。字符串中的索引用法与列表中的索引用法相同。
\end{ExtraKnowledge}

同时，我们可对列表中的数据进行修改。要修改数据，只需要使用索引指定修改的数据，然后使用=重新赋值。如：
\begin{lstlisting}
>>> name_list = ['Sayori', '莫妮卡', 'Natsuki', 'Yuri']
>>> name_list[1] = 'Monika'
>>> name_list

%\Output{['Sayori', 'Monika', 'Natsuki', 'Yuri']}%
\end{lstlisting}

若要添加数据，则可以使用insert函数与append函数。如
\begin{lstlisting}
>>> name_list = ['Monika', 'Sayori']
>>> name_list.insert(1, 'Natsuki')
>>> name_list.append('Yuri')
>>> name_list

%\Output{['Monika', 'Natsuki', 'Sayori', 'Yuri']}%
\end{lstlisting}

对于insert函数，它接受两个参数。第一个参数为一个整数，代表在列表的指定索引处添加一个数据。第二个参数则是添加的数据。

对于append函数，它接受一个参数，即要添加的内容。append函数会在列表末尾添加数据。

若要删除数据，则可以使用pop函数与remove函数。pop函数与remove函数都只接受一个参数。pop函数接受一个整数参数，可以删除列表中指定索引处的数据。remove函数接受一个任意类型的数据，它会先检查列表中是否存在一个数据与参数相同，如果存在则移除，如果不存在则抛出ValueError错误。如：
\begin{lstlisting}
>>> name_list = ['Monika', 'Sayori', 'Yuri', 'Natsuki']
>>> name_list.pop(0)
>>> name_list
%\Output{['Sayori', 'Yuri', 'Natsuki']}%

>>> name_list.remove("Sayori")
%\Output{['Yuri', 'Natsuki']}%

>>> name_list.remove("Monika")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: list.remove(x): x not in list
\end{lstlisting}

\subsubsection{元组}
元组（tuple）是一种不可变的数据类型。元组支持列表除修改、添加、删除外的所有功能。如：
\begin{lstlisting}
>>> name_list = ('Sayori', 'Monika', 'Natsuki', 'Yuri')
>>> name_list[3]
%\Output{'Yuri'}%

>>> name_list.append("Main Character")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'tuple' object has no attribute 'append'
\end{lstlisting}

\subsection{字典}
字典（dict）就像它的名字一样，可以像查字典一样取查找。如：
\begin{lstlisting}
>>> point = {'Sayori': 0}
>>> point
%\Output{\{'Sayori': 0\}}%

>>> point['Sayori'] = 2
>>> point['Monika'] = 1
>>> point['Natsuki'] = 3
>>> point['Yuri'] = 1

>>> point
%\Output{\{'Sayori': 2, 'Monika': 1, 'Natsuki': 3, 'Yuri': 1\}}%

>>> point['Sayori']
%\Output{2}%
\end{lstlisting}

\subsection{布尔类型}
布尔类型是最简单的一种类型。布尔类型只包括两个值真（True）、假（False）。如：
\begin{lstlisting}
>>> is_act_two = False
>>> is_act_two
%\Output{False}%

>>> is_act_two = True
>>> is_act_two
%\Output{True}%
\end{lstlisting}

Python中的内置数据类型均可进行逻辑运算和比较。如：
\begin{lstlisting}
>>> a = False
>>> a is True
%\Output{False}%

>>> not a
%\Output{True}%

>>> b = 3
>>> b != 2
%\Output{True}%

>>> c = 2
>>> c <= b
# 即 2 <= 3

%\Output{True}%
\end{lstlisting}
详细逻辑操作符请见表\ref{table:4.1.5}。

\begin{center}
    % \tablefirsthead{
    %     \hline
    %     \multicolumn{1}{|c}{操作符}
    %     \multicolumn{1}{|c|}{描述}
    %     \multicolumn{1}{c|}{示例}
    %     \hline
    % }
    \tablehead{
    \hline
    操作符 & 描述 & 示例\\
    \hline
    }
    \tabletail{\hline}
    \tablelasttail{\hline}
    \captionof{table}{常见逻辑、比较运算符与示意}
    \label{table:4.1.5}
    \begin{supertabular}{|c|p{8cm}|c|}
        \hline
        == & 比较两个对象是否相等 & 2 == 2; a == b\\
        \hline
        != & 比较两个对象是否不等 & 1 != 2; a != b\\
        \hline
        > & 比较左对象是否大于右对象 & 3 > 2\\
        \hline
        < & 比较左对象是否小于右对象 & 2 < 3\\
        \hline
        >= & 比较左对象是否大于等于右对象 & 3 >= 2; 3 >= 3\\
        \hline
        <= & 比较左对象是否小于等于右对象 & 2 <= 3; 3 <= 3\\
        \hline
        is & 比较两个对象内存是否相等（更加严格的==）& a is True\\
        \hline
        not & 逻辑非，用于反转操作数的逻辑状态。即True则为False，False则为True & not True\\
        \hline
        and & 逻辑与，当只有左操作数与右操作数皆为真时，条件为真 & 1 == 2 and 3 < 4\\
        \hline
        or & 逻辑或，当左操作数和右操作数中有一个为真时，条件为真 & 1 == 2 or 10 > 6\\
        \hline
    \end{supertabular}
\end{center}

\begin{ExtraKnowledge}
    此处只对Python的一些常见类型做了简单的介绍。Python中还有其他类型，如可调用类（callable）等。本书目的以教学Ren'Py为主，故不会涉及Python过多。有兴趣者可以前往 \url{https://www.runoob.com/python3/python3-tutorial.html} 进行更深入的学习。
\end{ExtraKnowledge}

\subsection{小节}
现在，让我们将上述所说的Python的内置数据类型运用到实际代码中。如下例：

\begin{lstlisting}[caption=script-ch1.rpy]
# Chapter 0
label ch0_start:
    python:
        # aff - affection
        n_aff = 0
        m_aff = 0
    scene bg club_day
    "{cps=20}快到{b}学园祭{/b}了。{/cps}{w=.5}{nw}"
    show monika 1a at l41 zorder 1
    m "各位！我们得开始准备了！"
    show sayori 1a at h42 zorder 1
    s "好耶！！！！"
    show natsuki 1a at t43 zorder 1
    n 2d "啊，我都等不及学园祭了。"
    n "肯定会很棒的！"
    show yuri 1a at s44 zorder 1
    y "..."
    scene bg club_day
    show monika 2a at t21 zorder 1
    show sayori 2a at t22 zorder 1
    m "那么，是时候来进行分工了。"
    m 4k "[player],你想要做什么? "
    menu:
        "做小蛋糕":
            s "夏树的小蛋糕最好吃了！"
            python:
                n_aff += 1
                m_aff -= 1
        "布置教室":
            m "那我们可得抓紧时间了！"
            python:
                n_aff -= 1
                m_aff += 1
    return
\end{lstlisting}

上述代码中，我们现将n\_aff与m\_aff赋值为了0，并且随着玩家做出的选择，n\_aff与m\_aff会分别增加或减少一定的数值。

\begin{ExtraKnowledge}
    \$、python语句块都是在Ren'Py中运行Python代码的方式，将会在后续的章节中介绍。
\end{ExtraKnowledge}
\end{document}