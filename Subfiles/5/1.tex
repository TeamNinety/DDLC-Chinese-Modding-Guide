\documentclass[../../Main.tex]{subfiles}
\begin{document}
\section{特殊脚本}

打开game文件夹，我们能够发现许多rpy文件。在本节中，我们将会了解这些文件内所定义的内容、它们的作用与使用方法。

\subsection{bsod.rpy}

bsod.rpy中定义了DDLC二周目中“电脑蓝屏”的特殊效果。代码会自动检测当前电脑的类型、版本，并生成对应的“死机”效果。


\subsection{cgs.rpy}

这个文件中定义了DDLC中的所有CG内容。


\subsection{console.rpy}

这个文件中定义了假结局中莫妮卡删除CG时使用的控制台。其使用方法为：
\begin{lstlisting}
call updateconsole(text="<命令>", history="<输出>")# 第一次调用

call updateconsolehistory(text="<输出>") # 更新输出

call hideconsole  # 隐藏控制台
\end{lstlisting}

例如：
\begin{lstlisting}
call updateconsole(text="print('Hello, World'), history="Hello, World")
\end{lstlisting}

运行代码，我们发现在游戏的左上角出现了控制台，并自动输入了“print('Hello, World')”这串代码，执行结果为“Hello, World”

\subsection{glitchtext.rpy}

glitchtext.rpy中定义了乱码文字。我们可以通过调用glitchtext函数生成一段乱码文字。其使用方法如下:
\begin{lstlisting}
$ <变量名> = glitchtext(<长度>)
\end{lstlisting}


例如我想要生成一串长度为 200 的乱码字符，并把它赋值给一个名为 gtext 的变量，可以用以下的代码:
\begin{lstlisting}
$ gtext = glitchtext(200)
\end{lstlisting}

\subsection{poems\_special.rpy\textbackslash poems-tl.rpy\textbackslash poems.rpy}

这三个文件共同存储了在游戏中出现的诗歌。其中poems\_special.rpy 定义了二周目的特殊诗歌，poems-tl.rpy存储着中文版本的诗歌，poems.rpy则是原版的诗歌。

我们可以按照以下模板定义一首新的诗歌：
\begin{lstlisting}
poem_<编号> = Poem(
    author = <作者名>,
    title = <标题>,
    text = """\
<具体诗歌内容>"""
    )
\end{lstlisting}

同时我们也可以通过showpoem来展示诗歌。如下例：
\begin{lstlisting}
poem_a = Poem(
    author = "sayori",
    title = "Empty",
    text = """\
婚姻，热情，童年，快乐，色彩，希望，友人，可爱，松软，单纯，糖果，购物，狗狗，猫咪，云朵，决意，自杀，想象，秘密，活泼，存在，璀璨，绯红，飓风"""
)

call showpoem(poem_a)
\end{lstlisting}
\end{document}